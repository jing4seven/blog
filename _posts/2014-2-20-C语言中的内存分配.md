---
layout: post
title: C语言中的内存分配
tags: [C]
---
{% include JB/setup %}


### C中内存分为三个区
* **栈**：存放函数形参和函数内的局部变量。由编译器分配空间，函数执行完毕后由编译器自动释放。
* **堆**：存放由动态分配函数（如malloc）分配的空间。由程序员手动分配，必须由程序员使用free释放；如果忘记释放，会导致所分配的空间一直占着不放，即导致内存泄漏。
* **具有外连接的、具有内部连接的以及具有空连接的静态变量的**
    * **全局区**：存放全局变量和静态变量。存在于程序整个运行期间，由编译器分配和释放。
    * **文字常量区**：存放文字常量。如char *c = "123456"; 则"123456"为文字常量，存放在文字常量区，也有编译器分配和释放。
    * **程序代码区**：存放程序的二进制代码。


![Diagram1](/assets/images/c.alloc.png)